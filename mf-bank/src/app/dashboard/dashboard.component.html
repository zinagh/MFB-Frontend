<app-base></app-base>
<div class="dashboard container-fluid py-4">
  <div style="margin-bottom: 5px;">
    <a class="btn btn-outline-primary btn-sm mb-0 me-3" routerLink="/churn" >churn</a>
  </div>
  <ng-container *ngIf="isThisEmployee">
    <div class="col-12">
      <div class="card mb-4">

        <div class="card-body">
          <select class="form-control mt-2" id="type" [(ngModel)]="selectedUser" (change)="onUserSelect($event)">
              <option selected disabled>Select User</option>
              <option *ngFor="let user of users" [value]="user.userName">{{ user.userName }}</option>
            </select>
                  <div class="col-6">
                      <select class="form-control mt-2" id="type" [(ngModel)]="selectedMonth" (change)="onMonthChange($event)">
                        <option *ngFor="let month of months; let i = index" [value]="i + 1" [selected]="selectedMonth === i + 1">{{ month }}</option>
                      </select>
                  </div>

            </div>

      </div>
    </div>
  </ng-container>

  <div class="row">
    <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4 ">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
<p class="text-sm mb-0 text-capitalize font-weight-bold">Account Balance </p>
<h5 class="font-weight-bolder mb-0">{{ accountBalance }}  <span class="text  text-sm font-weight-bolder text-success">TND</span> </h5>

              </div>
            </div>
            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                <i class="ni ni-paper-diploma text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
                <p class="text-sm mb-0 text-sm font-weight-bolder">Activity Ratio </p>
                <h5 class="font-weight-bolder mb-0">
                    {{ accountActivity }}
                    <ng-container *ngIf="accountActivity > 50; else normalColor">
                        <span class="text-danger text-sm font-weight-bolder">%</span>
                    </ng-container>
                    <ng-template #normalColor>
                        <span class="text-success text-sm font-weight-bolder">%</span>
                    </ng-template>
                </h5>
            </div>
            </div>

            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                <i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
                <p class="text-sm mb-0 text-capitalize font-weight-bold">Utilization Ratio</p>
                <h5 class="font-weight-bolder mb-0">
                  {{ accountUtilization }}
                  <span class="text-success text-sm font-weight-bolder">%</span>
                </h5>
              </div>
            </div>
            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6">
    </div>
  </div>

  <div class="col-lg-7 mx-auto" style="margin-top: 20px;">
    <div class="card z-index-2">
      <div class="card-header pb-0">
        <h6 class="text-sm mb-0 text-capitalize font-weight-bold"> Total Fee Income Per Account</h6>  &nbsp;
        <p class="text-sm">
          <i class="ni ni-money-coins text-lg opacity-10 text-success" aria-hidden="true"></i>
          &nbsp;
          <span class="font-weight-bold">{{ theTotal }}</span>
        </p>
      </div>


     <div class="card-body p-3">
        <div class="chart">
          <canvas id="chart-line" class="chart-canvas" height="400"></canvas>
        </div>


      </div>





    </div>&nbsp;
    <div class="card z-index-2">
      <div class="card-header pb-0">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="text-sm mb-0 text-capitalize font-weight-bold">
              <i class="ni ni-money-coins text-lg opacity-10 text-success" style="left: 100%;" aria-hidden="true"></i> &nbsp;
               transfers Ratio</h6>
          </div>

        </div>
      </div>
      <canvas id="pieChart"></canvas>
    </div>
</div>

<app-footer></app-footer>
</div>
